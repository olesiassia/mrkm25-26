# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ3: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è ECDSA

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î –æ—Å–Ω–æ–≤–∏ **–ê–ª–≥–æ—Ä–∏—Ç–º—É –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –ü—ñ–¥–ø–∏—Å—É –Ω–∞ –ï–ª—ñ–ø—Ç–∏—á–Ω–∏—Ö –ö—Ä–∏–≤–∏—Ö (ECDSA)** –¥–ª—è –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è —Ç–∞ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ñ–∞–π–ª—ñ–≤.

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É **PyCryptodome** –∑–≥—ñ–¥–Ω–æ –∑ –≤–∏–º–æ–≥–∞–º–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1. –í–∏–º–æ–≥–∏

* Python 3.8+
* –í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤–∞–Ω—ñ —É `requirements.txt`.

### 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (`venv`) —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è (–¥–ª—è Linux/macOS)
source venv/bin/activate
# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è (–¥–ª—è Windows PowerShell)
# .\venv\Scripts\Activate

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

–î–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ—î–∫—Ç—É, –æ—Å—å –π–æ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

* **.** (–ö–æ—Ä–µ–Ω–µ–≤–∏–π –∫–∞—Ç–∞–ª–æ–≥)
    * **`keys/`** (–ú—ñ—Å—Ü–µ –¥–ª—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∫–ª—é—á—ñ–≤)
        * `priv.pem` (–ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á - **–°–ï–ö–†–ï–¢–ù–ò–ô**, —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è —É `.gitignore`)
        * `pub.pem` (–ü—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á)
    * **`src/`** (–û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥)
        * `cli.py` (–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ - CLI)
        * `keygen.py` (–ú–æ–¥—É–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–ª—é—á—ñ–≤)
        * `sign.py` (–ú–æ–¥—É–ª—å –¥–ª—è –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö - DSS/ECDSA)
        * `verify.py` (–ú–æ–¥—É–ª—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—ñ–¥–ø–∏—Å—É)
        * `utils.py` (–î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—é—á—ñ–≤, —Ö–µ—à—É–≤–∞–Ω–Ω—è)
    * **`tests/`** (–¢–µ—Å—Ç–∏ —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥)
        * `sample_message.txt` (–ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–π–ª—É –¥–ª—è –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è)
        * `test_control_example.sh` (–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ä–æ–±–æ—Ç–∏)
    * `requirements.txt` (–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `pycryptodome`)

### 4. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CLI

–û—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø—Ä–æ—î–∫—Ç—É –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ **—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞** (`src/cli.py`).

### 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–ª—é—á—ñ–≤

–¶—è –∫–æ–º–∞–Ω–¥–∞ –≥–µ–Ω–µ—Ä—É—î **–ø—Ä–∏–≤–∞—Ç–Ω–∏–π** (`priv.pem`) —Ç–∞ **–ø—É–±–ª—ñ—á–Ω–∏–π** (`pub.pem`) –∫–ª—é—á—ñ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î —ó—Ö —É –ø–∞–ø–∫—É `keys/`.

```bash
python3 src/cli.py keygen --priv keys/priv.pem --pub keys/pub.pem
```

### 2. –ü—ñ–¥–ø–∏—Å–∞–Ω–Ω—è —Ñ–∞–π–ª—É

–°—Ç–≤–æ—Ä—é—î **—Ü–∏—Ñ—Ä–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å** (`.sig`) –¥–ª—è –≤—Ö—ñ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ **–ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á**.

```bash
python3 src/cli.py sign \
    --key keys/priv.pem \
    --in <INPUT_FILE> \
    --out <OUTPUT_SIGNATURE_FILE.sig>

# –ü—Ä–∏–∫–ª–∞–¥:
# python3 src/cli.py sign \
#     --key keys/priv.pem \
#     --in tests/sample_message.txt \
#     --out tests/sample_message.txt.sig
```

### 5. üß™ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π –ü—Ä–∏–∫–ª–∞–¥

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ä–æ–±–æ—Ç–∏ –ø—Ä–æ—î–∫—Ç—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **bash-—Å–∫—Ä–∏–ø—Ç** `tests/test_control_example.sh`. –í—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î –≤—Å—ñ –µ—Ç–∞–ø–∏: **–≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∫–ª—é—á—ñ–≤**, **–ø—ñ–¥–ø–∏—Å** —Ç–∞ **–≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é**.

### 1. –ó—Ä–æ–±–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º

–°–ø–µ—Ä—à—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –Ω–∞–¥–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç—É –ø—Ä–∞–≤–∞ –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:

```bash
chmod +x tests/test_control_example.sh
```

### 2. –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç:

```bash
./tests/test_control_example.sh
```

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:

–Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ, –≤–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –≤–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—ñ:

[1] Generating ECC key pair... 

[+] –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–ª—é—á –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É keys/priv.pem 

[+] –ü—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É keys/pub.pem 

[2] Signing sample_message.txt... 

[+] –ü—ñ–¥–ø–∏—Å –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É tests/sample.sig 

[3] Verifying signature... 

[‚úì] –ü—ñ–¥–ø–∏—Å –≤—ñ—Ä–Ω–∏–π Done.